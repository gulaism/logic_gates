<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Umbrella Reminder System</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb;
            color: #333;
        }
        .logic-button {
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid #ccc;
            user-select: none;
        }
        .logic-button.active {
            transform: scale(1.05);
            border-color: #3b82f6;
            box-shadow: 0 4px 10px rgba(59, 130, 246, 0.5);
        }
        #input_rain.active { background-color: #3b82f6; color: white; } /* Blue for Rain */
        #input_drizzle.active { background-color: #60a5fa; color: white; } /* Lighter Blue for Drizzle */
        #input_wind.active { background-color: #f59e0b; color: white; } /* Amber for Wind */
        #input_time.active { background-color: #4b5563; color: white; } /* Gray for Night Time */

        /* Custom toggle styling for Time input */
        .toggle-switch {
            width: 50px;
            height: 28px;
            background-color: #ccc;
            border-radius: 14px;
            position: relative;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .toggle-switch.active {
            background-color: #4b5563;
        }
        .toggle-switch::after {
            content: '';
            width: 24px;
            height: 24px;
            background-color: white;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: transform 0.3s;
        }
        .toggle-switch.active::after {
            transform: translateX(22px);
        }
    </style>
</head>
<body class="p-4 sm:p-8 flex justify-center items-start min-h-screen">

    <div class="w-full max-w-4xl bg-white shadow-xl rounded-2xl p-6 md:p-10 border border-gray-100">
        <h1 class="text-3xl font-extrabold text-gray-800 mb-2 text-center">Smart Umbrella Reminder System</h1>
        <p class="text-center text-gray-500 mb-8">Demonstrating AI Logic using AND, OR, NOR, and XNOR Gates.</p>

        <!-- INPUT SECTION -->
        <section class="mb-10 p-6 bg-blue-50 rounded-xl shadow-inner">
            <h2 class="text-xl font-bold text-blue-700 mb-4 flex items-center">
                Inputs ($I$): Environmental Sensors
            </h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">

                <!-- Rain Input -->
                <button id="input_rain" class="logic-button bg-white text-gray-700 p-4 rounded-xl flex flex-col items-center hover:bg-red-50" onclick="toggleInput('input_rain')">
                    <span class="text-3xl">üåßÔ∏è</span>
                    <span class="font-semibold mt-1">Rain ($I_R$)</span>
                    <span class="text-xs mt-1 text-gray-500">Value: <span id="val_rain">0</span></span>
                </button>

                <!-- Drizzle Input -->
                <button id="input_drizzle" class="logic-button bg-white text-gray-700 p-4 rounded-xl flex flex-col items-center hover:bg-red-50" onclick="toggleInput('input_drizzle')">
                    <span class="text-3xl">üå¶Ô∏è</span>
                    <span class="font-semibold mt-1">Drizzle ($I_D$)</span>
                    <span class="text-xs mt-1 text-gray-500">Value: <span id="val_drizzle">0</span></span>
                </button>

                <!-- Wind Input -->
                <button id="input_wind" class="logic-button bg-white text-gray-700 p-4 rounded-xl flex flex-col items-center hover:bg-red-50" onclick="toggleInput('input_wind')">
                    <span class="text-3xl">üí®</span>
                    <span class="font-semibold mt-1">High Wind ($I_W$)</span>
                    <span class="text-xs mt-1 text-gray-500">Value: <span id="val_wind">0</span></span>
                </button>

                <!-- Time Input (Toggle Switch for visual difference) -->
                <div class="logic-button bg-white text-gray-700 p-4 rounded-xl flex flex-col items-center justify-center hover:bg-red-50">
                    <span class="text-3xl" id="time_icon">‚òÄÔ∏è</span>
                    <span class="font-semibold mt-1">Night Time ($I_T$)</span>
                    <div class="mt-2 flex items-center space-x-2">
                        <span class="text-xs">Day</span>
                        <div id="input_time" class="toggle-switch" onclick="toggleInput('input_time')"></div>
                        <span class="text-xs">Night</span>
                    </div>
                    <span class="text-xs mt-1 text-gray-500">Value: <span id="val_time">0</span></span>
                </div>
            </div>
        </section>

        <!-- LOGIC GATE SECTION (The Neural Network Hidden Layer) -->
        <section class="mb-10 p-6 bg-white rounded-xl shadow-lg border-2 border-gray-100">
            <h2 class="text-xl font-bold text-gray-700 mb-4 flex items-center">
                Hidden Layer: Logic Gates
            </h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">

                <!-- OR Gate -->
                <div class="p-3 border rounded-xl bg-gray-50 text-center">
                    <div class="font-bold text-lg text-green-600">OR</div>
                    <p class="text-sm text-gray-600 mb-1">Risk ($I_R + I_D$)</p>
                    <p class="text-2xl font-extrabold" id="O_Risk">0</p>
                </div>

                <!-- AND Gate -->
                <div class="p-3 border rounded-xl bg-gray-50 text-center">
                    <div class="font-bold text-lg text-green-600">AND</div>
                    <p class="text-sm text-gray-600 mb-1">Drizzle Hazard ($I_D \cdot I_W$)</p>
                    <p class="text-2xl font-extrabold" id="A_Hazard">0</p>
                </div>

                <!-- NOR Gate -->
                <div class="p-3 border rounded-xl bg-gray-50 text-center">
                    <div class="font-bold text-lg text-green-600">NOR</div>
                    <p class="text-sm text-gray-600 mb-1">No Rain ($\overline{I_R + I_D}$)</p>
                    <p class="text-2xl font-extrabold" id="N_NoRain">1</p>
                </div>

                <!-- XNOR Gate -->
                <div class="p-3 border rounded-xl bg-gray-50 text-center">
                    <div class="font-bold text-lg text-green-600">XNOR</div>
                    <p class="text-sm text-gray-600 mb-1">Consistent ($\overline{I_T \oplus I_W}$)</p>
                    <p class="text-2xl font-extrabold" id="X_Consistent">1</p>
                </div>
            </div>
            <p class="text-xs text-gray-500 mt-4 text-center">The final decision is: Reminder ON = (Risk AND NOT Drizzle Hazard) AND NOT No Rain</p>
        </section>

        <!-- OUTPUT SECTION -->
        <section class="p-6 bg-green-50 rounded-xl border-4 border-green-200 text-center">
            <h2 class="text-2xl font-bold text-green-800 mb-4">Final Recommendation</h2>
            <div class="flex flex-col items-center justify-center">
                <span id="umbrella_output" class="text-8xl transition-transform duration-500 ease-in-out">
                    üö´‚òÇÔ∏è
                </span>
                <p id="output_text" class="text-2xl font-bold mt-4 text-gray-700">
                    No Umbrella Needed.
                </p>
                <p class="text-sm mt-2 text-gray-500">Reminder ON: <span id="val_output" class="font-bold">0</span></p>
            </div>
        </section>
    </div>

    <script>
        // --- LOGIC GATE IMPLEMENTATION ---

        // AND Gate: True only if both A and B are True
        function AND(A, B) { return A && B; }

        // OR Gate: True if A OR B (or both) are True
        function OR(A, B) { return A || B; }

        // NOR Gate: True only if NOT (A OR B)
        function NOR(A, B) { return !(A || B); }

        // XNOR Gate: True if A and B are the same (both True or both False)
        function XNOR(A, B) { return A === B; }

        // --- CORE APPLICATION LOGIC ---

        function toggleInput(id) {
            const element = document.getElementById(id);
            const isToggled = element.classList.toggle('active');

            // Update Input Value Display
            const valSpanId = 'val_' + id.split('_')[1];
            document.getElementById(valSpanId).textContent = isToggled ? '1' : '0';

            // Special case for Time input icon
            if (id === 'input_time') {
                document.getElementById('time_icon').textContent = isToggled ? 'üåô' : '‚òÄÔ∏è';
            }

            calculateReminder();
        }

        function calculateReminder() {
            // 1. Get Boolean Inputs (True/False based on 'active' class)
            const Ir = document.getElementById('input_rain').classList.contains('active');
            const Id = document.getElementById('input_drizzle').classList.contains('active');
            const Iw = document.getElementById('input_wind').classList.contains('active');
            const It = document.getElementById('input_time').classList.contains('active');

            // 2. Intermediate Gate Outputs (The Hidden Layer)
            const O_Risk = OR(Ir, Id);               // OR: Any Rain Risk? (Uses OR)
            
            // A_Hazard is now redefined to be a "Drizzle Hazard" as requested by the user.
            // TRUE if Drizzle AND High Wind are present (I_D * I_W). This is used to cancel the umbrella.
            const A_Hazard = AND(Id, Iw);             // AND: Drizzle AND Wind? (Uses AND)
            
            const N_NoRain = NOR(Ir, Id);             // NOR: Absolutely No Rain Risk? (Uses NOR)
            const X_Consistent = XNOR(It, Iw);        // XNOR: Time and Wind are consistent? (Uses XNOR)

            // 3. Final Logic (The decision layer)
            
            // FINAL LOGIC: Reminder ON = (O_Risk AND NOT A_Hazard) AND NOT N_NoRain
            // This logic is simple and robust:
            // 1. Must have rain risk (O_Risk=1)
            // 2. Must not be a Drizzle Hazard (A_Hazard=0)
            // 3. Must confirm rain is actually falling (NOT N_NoRain=1)
            
            // Term 1: Must Take (O_Risk AND NOT A_Hazard)
            const notAHazard = !A_Hazard;
            const mustTake = AND(O_Risk, notAHazard);

            // Term 2: The Universal Safety Switch (NOT N_NoRain)
            const notNNoRain = !N_NoRain; 

            // Final Decision
            const reminderOn = AND(mustTake, notNNoRain);

            // 4. Update UI
            updateGateDisplay({ O_Risk, A_Hazard, N_NoRain, X_Consistent });
            updateOutput(reminderOn);
        }

        function updateGateDisplay(results) {
            // Display results in the Logic Gate section
            document.getElementById('O_Risk').textContent = results.O_Risk ? '1' : '0';
            document.getElementById('A_Hazard').textContent = results.A_Hazard ? '1' : '0';
            document.getElementById('N_NoRain').textContent = results.N_NoRain ? '1' : '0';
            document.getElementById('X_Consistent').textContent = results.X_Consistent ? '1' : '0';
        }

        function updateOutput(isReminderOn) {
            const umbrellaElement = document.getElementById('umbrella_output');
            const textElement = document.getElementById('output_text');
            const valElement = document.getElementById('val_output');

            if (isReminderOn) {
                umbrellaElement.textContent = '‚òî';
                textElement.textContent = 'Umbrella Recommended! (Reminder ON)';
                textElement.classList.remove('text-gray-700');
                textElement.classList.add('text-green-800');
                umbrellaElement.style.transform = 'scale(1.1)';
                valElement.textContent = '1';
            } else {
                umbrellaElement.textContent = 'üö´‚òÇÔ∏è';
                textElement.textContent = 'No Umbrella Needed.';
                textElement.classList.remove('text-green-800');
                textElement.classList.add('text-gray-700');
                umbrellaElement.style.transform = 'scale(1.0)';
                valElement.textContent = '0';
            }
        }

        // Initialize the calculation on load
        window.onload = function() {
            calculateReminder();
        };
    </script>
</body>
</html>